# Autogenerated by Chef. Any local changes will be overwritten.

#
# Application and Services Logs - DFS Replication
#
[WinEventLog://DFS Replication]
disabled=0
sourcetype="WinEventLog:DFS Replication"
index=winevents
queue=parsingQueue

#
# Application and Services Logs - Directory Service
#
[WinEventLog://Directory Service]
disabled=0
sourcetype="WinEventLog:Directory Service"
index=winevents
queue=parsingQueue

#
# Application and Services Logs - File Replication Service
#
[WinEventLog://File Replication Service]
disabled=0
sourcetype="WinEventLog:File Replication Service"
index=winevents
queue=parsingQueue

#
# Application and Services Logs - Key Management Service
#
[WinEventLog://Key Management Service]
disabled=0
sourcetype="WinEventLog:Key Management Service"
index=winevents
queue=parsingQueue

#
# Collect Replication Information
#
<% if @ta_version == '2012R2' -%>
[powershell://Replication-Stats]
script = & "$SplunkHome\etc\apps\TA-DomainController-2012R2\bin\Invoke-MonitoredScript.ps1" -Command ".\replication-stats.ps1"
schedule = 30 */5 * ? * *
<% else %>
[script://.\bin\runpowershell.cmd ad-repl-stat.ps1]
interval=300
<% end %>
index = msad
source = Powershell
sourcetype=MSAD:NT6:Replication
disabled=false

#
# Collect Health and Topology Information
#
<% if @ta_version == '2012R2' -%>
[powershell://AD-Health]
script = & "$SplunkHome\etc\apps\TA-DomainController-2012R2\bin\Invoke-MonitoredScript.ps1" -Command ".\ad-health.ps1"
schedule = 0 */5 * ? * *
<% else %>
[script://.\bin\runpowershell.cmd ad-health.ps1]
interval=300
<% end %>
index = msad
source=Powershell
sourcetype=MSAD:NT6:Health
disabled=false

#
# Collect Site, Site Link and Subnet Information
#
<% if @ta_version == '2012R2' -%>
[powershell://Siteinfo]
script = & "$SplunkHome\etc\apps\TA-DomainController-2012R2\bin\Invoke-MonitoredScript.ps1" -Command ".\siteinfo.ps1"
schedule = 0 15 * ? * *
<% else %>
[script://.\bin\runpowershell.cmd siteinfo.ps1]
interval=3600
<% end %>
index = msad
source = Powershell
sourcetype=MSAD:NT6:SiteInfo
disabled=false

#
# Perfmon Collection
#
[perfmon://Processor]
object = Processor
counters = *
instances = *
interval = 10
disabled = 0
index=perfmon

[perfmon://Memory]
object = Memory
counters = *
interval = 10
disabled = 0
index=perfmon

[perfmon://Network_Interface]
object = Network Interface
counters = *
instances = *
interval = 10
disabled = 0
index=perfmon

[perfmon://DFS_Replicated_Folders]
object = DFS Replicated Folders
counters = *
instances = *
interval = 30
disabled = 0
index=perfmon

[perfmon://NTDS]
object = NTDS
counters = *
interval = 10
disabled = 0
index=perfmon

[admon://NearestDC]
monitorSubtree = 1
interval=3600
disabled=false
index=msad

#
# Subnet Affinity Log
#
[monitor://C:\Windows\debug\netlogon.log]
sourcetype=MSAD:NT6:Netlogon
disabled=false
index=msad
